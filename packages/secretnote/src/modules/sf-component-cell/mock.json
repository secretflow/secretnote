{
  "domain": "preprocessing",
  "name": "psi",
  "desc": "PSI between two parties.",
  "version": "0.0.1",
  "attrs": [
    {
      "name": "protocol",
      "desc": "PSI protocol.",
      "type": "AT_STRING",
      "atomic": {
        "isOptional": true,
        "defaultValue": {
          "s": "ECDH_PSI_2PC"
        },
        "allowedValues": {
          "ss": ["ECDH_PSI_2PC", "KKRT_PSI_2PC", "BC22_PSI_2PC"]
        }
      }
    },
    {
      "name": "sort",
      "desc": "Sort the output.",
      "type": "AT_BOOL",
      "atomic": {
        "isOptional": true,
        "defaultValue": {}
      }
    },
    {
      "name": "bucket_size",
      "desc": "Specify the hash bucket size used in PSI. Larger values consume more memory.",
      "type": "AT_INT",
      "atomic": {
        "isOptional": true,
        "defaultValue": {
          "i64": "1048576"
        },
        "lowerBoundEnabled": true,
        "lowerBound": {}
      }
    },
    {
      "name": "ecdh_curve_type",
      "desc": "Curve type for ECDH PSI.",
      "type": "AT_STRING",
      "atomic": {
        "isOptional": true,
        "defaultValue": {
          "s": "CURVE_FOURQ"
        },
        "allowedValues": {
          "ss": ["CURVE_25519", "CURVE_FOURQ", "CURVE_SM2", "CURVE_SECP256K1"]
        }
      }
    }
  ],
  "inputs": [
    {
      "name": "receiver_input",
      "desc": "Individual table for receiver",
      "types": ["sf.table.individual"],
      "attrs": [
        {
          "name": "key",
          "desc": "Column(s) used to join.",
          "colMinCntInclusive": "1"
        }
      ]
    },
    {
      "name": "sender_input",
      "desc": "Individual table for sender",
      "types": ["sf.table.individual"],
      "attrs": [
        {
          "name": "key",
          "desc": "Column(s) used to join.",
          "colMinCntInclusive": "1"
        }
      ]
    }
  ],
  "outputs": [
    {
      "name": "psi_output",
      "desc": "Output vertical table",
      "types": ["sf.table.vertical_table"]
    }
  ]
}
